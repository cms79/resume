@page "/experience"
@using Resume.Models
@using Resume.Components
@using Resume.Services
@inject IExperienceService ExperienceService

<PageTitle>Experience</PageTitle>

<MudText Typo="Typo.h2" GutterBottom="true">Experience</MudText>

@foreach (var company in _companies)
{
    <CompanyComponent Company="@company" MarginBottom="2em" />

    @foreach (var experience in company?.Experiences ?? [])
    {
        <MudStack Row="true">
            <MudDivider Vertical="true" FlexItem="true" Style="margin-top:10px;margin-bottom:10px;" />
            <div>
                <ExperienceComponent Experience="@experience" />
            </div>
        </MudStack>
    }
}

@code {
    IEnumerable<Company> _companies = [];

    protected override void OnInitialized()
    {
        _companies = ExperienceService.GetCompaniesWithExperience();
    }
}